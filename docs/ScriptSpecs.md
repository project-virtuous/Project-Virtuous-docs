# スクリプトの仕様

Project-Virtuousにおけるスクリプトの仕様です。

スクリプトから利用できるAPIの仕様は [API仕様](APIs.md) を参照してください。

## 1. スクリプトの保存場所

- すべてのスクリプトはProject-Virtuousの実行ファイルが存在するパス以下の `Virtuous/scripts` フォルダー直下に保存する必要があります。
    - `Virtuous/scripts` 以下のサブフォルダーに保存することはできません。
- すべてのスクリプトは拡張子が `.lua` である必要があります。

## 2. スクリプトの内容

```lua
-- スクリプトの例
info = {
    version = 1,
    name = "スクリプト",
}

function init()
    print("スクリプトの初期化")
end

function deinit()
    print("スクリプトの破棄処理")
end
```

スクリプトはLua言語で書かれます。

すべてのスクリプトは以下の要素を持つ必要があります。

- `info` テーブル
- `init` 関数
- `deinit` 関数

### 2.1 `info` テーブル

スクリプトの情報をシステムに伝えるためのテーブルです。

`version` にはこのスクリプトの仕様のバージョンを指定します。この項目は将来的な拡張のためのものなので、現在は `1` を指定しておいてください。

`name` にはこのスクリプトの名前を指定します。システム中では同名のスクリプトを2つ以上同時に実行できないので、ほかのスクリプトと重複しない名前を指定してください。

### 2.2 `init` 関数

スクリプトが起動するときに実行する関数です。

### 2.3 `deinit` 関数

スクリプトが破棄されるときに実行する関数です。